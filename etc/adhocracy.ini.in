#
# WARNING: Please make you changes in *.ini.in file and then run buildout to install it.
#

##############################################################
# Generated adhocracy settings
##############################################################

[DEFAULT]
{% if parts.adhocracy.debug == 'True' %}debug = True  {% end %}
{% if parts.adhocracy.debug != 'True' %}debug = False {% end %}

# Uncomment and replace with the address which should receive any error reports
email_to = ${parts.adhocracy['email.to']}
smtp_server = ${parts.adhocracy['smtp_server']}
smtp_port = ${parts.adhocracy['smtp_port']}
error_email_from = ${parts.adhocracy['email.from']}

[server:main]
use = egg:Paste#http
host = ${parts.adhocracy.host}
port = ${parts.ports.main}
{% if parts.adhocracy.debug == 'True' %}use_threadpool = False  {% end %}
{% if parts.adhocracy.debug != 'True' %}use_threadpool = True {% end %}
threadpool_workers = 20



{% if parts.adhocracy.themed == 'False' %}
###################not themed adhocracy ###################

[composite:main]
use = egg:Paste#urlmap
{% if parts.get("adhocracy_service_conf", False) %}
${parts.adhocracy_service_conf.cms_path} = adhocracy_service
/api = adhocracy_service
{% end %}
/ = default

[pipeline:default]
pipeline = content

{% end %}

{% if parts.adhocracy.themed == 'True' %}
###################diazo theme adhocracy ###################

[composite:main]
use = egg:Paste#urlmap
{% if parts.get("adhocracy_service_conf", False) %}
${parts.adhocracy_service_conf.cms_path} = adhocracy_service
/api = adhocracy_service
{% end %}
/static_theme = static
/_wordpress = wordpress_pipe
/ = default

# Serve the theme from disk from /static (as set up in [composite:main])
[app:static]
use = egg:Paste#static
document_root =  ${parts.adhocracy_code.absolute_theme_dir}

# Serve the Diazo-transformed content everywhere else
[pipeline:default]
pipeline = theme
           content

#[filter:wsgirewrite]
#use = egg:WSGIRewrite
#rulesets = testurls

#[wsgirewrite:testurls]
#rule1 = ^/test$ /index

# Reference the rules file and the prefix applied to relative links
# (e.g. the stylesheet). We turn on debug mode so that the theme is
# re-built on each request, making it easy to experiment.

[filter:theme]
use = egg:diazo
read_network = True
rules = file:/${parts.adhocracy_code.absolute_theme_dir}/rules.xml
prefix = /static_theme
doctype = <!DOCTYPE html>
{% if parts.adhocracy.debug == 'True' %}debug = true  {% end %}
{% if parts.adhocracy.debug != 'True' %}debug = false {% end %}
wordpress_backend = ${parts.domains.blog}
wordpress_backend_startseite = ${parts.domains.blog}/startseite/

###################diazo theme wordpress ###################

[pipeline:wordpress_pipe]
pipeline = theme
           _wordpress

# Proxy wordpress
[app:_wordpress]
use = egg:Paste#proxy
address = http://${parts.domains.blog}
suppress_http_headers = accept-encoding

{% end %}

###################Adhocracy conf ###################

#WARNING changed name: #[app:main]

[app:content]

{% if parts.adhocracy.themed == 'False' %}
adhocracy.themed = false
{% end %}
{% if parts.adhocracy.themed == 'True' %}
adhocracy.themed = true
{% end %}

use = egg:adhocracy
full_stack = true
static_files = true

cache_dir = ${parts.buildout.directory}/var/data
beaker.session.key = adhocracy_state
{% python
    import random;
    def randomhash(length):
        return hex(random.SystemRandom().getrandbits(length))
%}
beaker.session.secret = {% if parts.adhocracy.secret == 'autogenerated' %}${randomhash(256)}{% end %}{% if parts.adhocracy.secret != 'autogenerated' %}${parts.adhocracy.secret}{% end %}
adhocracy.auth.secret = {% if parts.adhocracy.secret == 'autogenerated' %}${randomhash(256)}{% end %}{% if parts.adhocracy.secret != 'autogenerated' %}${parts.adhocracy.secret}{% end %}

adhocracy.crypto.secret = {% if parts.adhocracy.secret == 'autogenerated' %}${randomhash(256)}{% end %}{% if parts.adhocracy.secret != 'autogenerated' %}${parts.adhocracy.secret}{% end %}

# INSTALL: Use cookies instead of beaker(=file system) to store session values
# adhocracy.session.implementation = cookie

# INSTALL: Use URLs like /i/meta/proposal/foo instead of
#          http://meta.adhocracy.lan:5001/proposal/foo
# If this is set, make sure to comment out beaker.session.cookie_domain
# and session.domain below.
adhocracy.relative_urls = ${parts.adhocracy.relative_urls}

# INSTALL: Insert your domain name here. Make sure to include the
# dot at the beginning of each domain to create wildcard cookies.
# Also make sure this is identical to the adhocracy.domains setting
# below.
# Should be commented out iff relative URLs are used.
{% if parts.adhocracy.relative_urls != 'True' %}beaker.session.cookie_domain = .${parts.domains.main}{% end %}
{% if parts.adhocracy.relative_urls != 'True' %}session.domain = .${parts.domains.main}{% end %}

# If you'd like to fine-tune the individual locations of the cache data dirs
# for the Cache data, or the Session saves, un-comment the desired settings
# here:
beaker.cache.data_dir = ${parts.buildout.directory}/var/data/cache
beaker.session.data_dir = ${parts.buildout.directory}/var/data/sessions

# INSTALL: Locate your Memcached server if installed. Otherwise comment this out.
memcached.server = 127.0.0.1:${parts.ports.memcached}

# INSTALL: SQLAlchemy database URL
sqlalchemy.url = ${parts.adhocracy['sqlalchemy.url']}

# INSTALL: Uncommenting this line will delete all locally saved data and drop
# the entire database. Please only use this if you have a backup ready.
# Yes, that's a magic string.
## adhocracy.setup.drop = KILL_EM_ALL
#

adhocracy.solr.url = http://${parts.solr.host}:${parts.solr.port}/solr

# To avoid a race condition between main and background processes, delaying
# background process updates can be delayed (see issue #358). This option
# defines the delay in seconds (default: 1 second)

# adhocracy.delay_update_queue_seconds = 1

# adhocracy.demo_users =

# If debug is enabled, an web-based interactive debugger can be executed from
# the HTTP500 error page, if the following option is set to true. This option
# doesn't have any effect if debug is false.
adhocracy.interactive_debugging = true

# WARNING: *THE LINE BELOW MUST BE UNCOMMENTED ON A PRODUCTION ENVIRONMENT*
# Debug mode will enable the interactive debugging tool, allowing ANYONE to
# execute malicious code after an exception is raised.
#set debug = false
{% if parts.adhocracy.debug != 'True' %}set debug = false {% end %}

# INSTALL: Set up the Adhocracy domain name. This will be used to determine the
# active instance, e.g. "Test Instance" for test.adhocracy.lan.

{% python
adhocracy_domain = parts['domains']['main']
if parts['domains'].get('main.force_port', None):
   adhocracy_domain += ':%s' % parts['ports']['main']
%}
adhocracy.domain = ${adhocracy_domain}
adhocracy.protocol = ${parts.adhocracy.protocol}

{% if parts.adhocracy.protocol == 'https' %}beaker.session.secure = true {% end %}

# INSTALL: Allow custom domains per instance
# Note that users will not keep their session when changing domains.
#
# adhocracy.instance_domains.enabled = True
# Define custom domains in JSON syntax:
# adhocracy.instance_domains = {
#     "aalen": "aalen.adhocracy.lan:5001",
#     "beelen": "beelen.adhocracy.lan:5001"
#     }

# INSTALL: Set a site name for all instances. This will be used as a part of
# the html <title>, notification E-Mails etc.
adhocracy.site.name = ${parts.adhocracy['site.name']}
adhocracy.language = ${parts.adhocracy.language}

# Restrict available locale choice
# adhocracy.enabled_locales = de, fr

# INSTALL: Server timezone
# adhocracy.timezone = Europe/Berlin

# INSTALL: The site directory contains your site modifications of Adhocracy
# (e.g. logos, CSS, html pages). A skeleton site directory will be created
# by the "setup-app" paster command.
adhocracy.site.dir = ${parts.buildout.directory}/var/site

# INSTALL: Location of your custom client (overrides adhocracy defaults)
# adhocracy.client_location = ${parts.buildout.directory}/src/adhocracy.YOUR_theme/

# INSTALL: A nice E-Mail address.
adhocracy.email.from = ${parts.adhocracy['email.from']}

# INSTALL: Allow users to use the above email as sender address in mass messages
allow_system_email_in_mass_messages = True

# Show fallback icons in instance overview if no instance icon is defined
adhocracy.show_instance_fallback_icons = False

# INSTALL: Twitter. Since there is currently no option to take it out of the UI,
# you will want to use Twitter. Create an OAuth application to allow users to
# link their profiles: https://twitter.com/oauth_clients
adhocracy.twitter.username = ${parts.twitter.username}
adhocracy.twitter.key = ${parts.twitter.key}
adhocracy.twitter.secret = ${parts.twitter.secret}
adhocracy.twitter.consumer_key = ${parts.twitter.consumer_key}
adhocracy.twitter.consumer_secret = ${parts.twitter.consumer_key}

# INSTALL: Full path to a installation wide twitter profile which is used in
# follow-us link, e.g. http://twitter.com/liqd_de
adhocracy.twitter.profile_url = ${parts.twitter.profile_url}

# INSTALL: bit.ly is used as a URL shortener. Since their API requires auth, you
# can either leave the defaults here and give certain usage statistics to the
# Adhocracy developers, or you can create an account at http://api.bit.ly
#adhocracy.bitly.login =
#adhocracy.bitly.key =


# Redis is used to build a task queue that will be processed by the
# `worker` process.
# Note: host has to be an IP address, not a hostname
adhocracy.redis.host = ${parts.domains.redis}
adhocracy.redis.port = ${parts.ports.redis}
adhocracy.redis.queue = ${parts.adhocracy.queue}

# Background processing can be disabled entirely
adhocracy.background_processing = true

# INSTALL: If you want to use a captcha verification, use one
# captchasdotnet or recaptcha here and fill in the expected values below.
#adhocracy.captcha_type = captchasdotnet

# INSTALL: If you want to use captchasdotnet register at captchas.net and
# add user_name and secret in the following lines
#captchasdotnet.user_name =
#captchasdotnet.secret =

# Allowed letters (only "english" letters and digits)
#captchasdotnet.alphabet = abcdefghkmnopqrstuvwxyz
# Captcha length
#captchasdotnet.letters = 6
# Path to random string files (basically unused, but nevertheless created)
#captchasdotnet.random_repository = /tmp/captchasnet-random-strings
# Cleanup interval for stale random files
#captchasdotnet.cleanup_time = 3600

# INSTALL: If you want to use recaptcha register at recaptcha.net and add your
# public and private key below
#recaptcha.public_key =
#recaptcha.private_key =

# TUNING: Memcache page fragments?
adhocracy.cache_tiles = True

# adhocracy.instance = adhocracy

# INSTALL: Add an HTTP header that identifies the server we're running on
#adhocracy.include_machine_name_in_header = True

# INSTALL: Feedback instance settings.
# If feedback shall be used, users need to be member of the feedback instance.
# This can be achieved with the `adhocracy.instances.autojoin` option below. If
# the feedback instance is enabled later, existing users can be added to the
# feedback instance with the following command:
#
# `bin/adhocpy src/adhocracy/scripts/add_all_users_to_instances.py etc/adhocracy.ini feedback`

adhocracy.use_feedback_instance = true
adhocracy.feedback_instance_key = feedback
adhocracy.feedback_instance_label = Feedback

# INSTALL: Instances which new users automatically join. This can be a comma
# separated list of instances, or ALL. If feedback is enabled above, the
# corresponding instance key or ALL should be part of this list.
adhocracy.instances.autojoin = feedback

# INSTALL: Read client IP addresses from X-Forwarded-For header.
adhocracy.behind_proxy = ${parts.adhocracy.behind_proxy}

# INSTALL: Store statistic information about requests in the database
#adhocracy.requestlog_active = True
# ... but don't log IP addresses ('dontlog', default)
# ... but set the last 8 / 80 bits to zero ('anonymize')
# -.. but log the full IP address ('none')
#adhocracy.requestlog_ipanonymization = anonymize

# INSTALL: Redirect outgoing links so that we can see when a user leaves our site.
# adhocracy.track_outgoing_links = True

# Statistics via Piwik
piwik.site =
piwik.id =

# Log to a sentry server. You need to supply a dsn in the form of a http url.
#adhocracy.sentry.enabled = true
#adhocracy.sentry.dsn =
#adhocracy.sentry.loglevel = WARNING

# INSTALL: Allow select users to include HTML
# If this option is set to false, we only allow markdown input.
# If it is set, we make a best effort to filter unsafe HTML, but allow iframes
# and other complex constructs.
#adhocracy.allow_user_html = false

# INSTALL: Allow registration
#adhocracy.allow_registration = true

# Require emails from users (default: true)
# adhocracy.require_email = true

# INSTALL: If registration is disabled above, and adhocracy.login_style is
# "alternate", notify this address on registration attempts.
# adhocracy.registration_support_email = ${parts.adhocracy['email.to']}

# INSTALL: How can users login?
# Available options are facebook, openid, username+password, email+password, shibboleth
# Note that shibboleth and facebook need additional configuration
#adhocracy.login_type = openid,username+password,email+password

# Allow password change for shibboleth users (default: false)
# adhocracy.allow_shibboleth_password_change = false

# Hide local login form (e.g. when using Shibboleth or OpenID primarily)
# The normal login can still be found under `/login?locallogin`
# adhocracy.hide_locallogin = true

# INSTALL: Allow administrators to let users log in from an invitation email
# adhocracy.enable_welcome = True

# INSTALL: Hide proposal comments
# adhocracy.proposal.hide_comments = true

# INSTALL: Hide individual votes and only show aggregate results (EXPERIMENTAL)
# adhocracy.hide_individual_votes = true

# INSTALL: Hide individual votes on instance level (also EXPERIMENTAL)
# adhocracy.hide_individual_votes.aalen = true

# INSTALL: Hide proposal rating results (EXPERIMENTAL). This only works if
# hide_individual_votes is also enabled.
# adhocracy.proposal.rate_poll.hide_scores = true
# adhocracy.proposal.rate_poll.hide_scores.beelen = true

# INSTALL: Allow users to lock themselves out of adhocracy
# adhocracy.self_deletion_allowed = true

# In the case that no came_from parameter is set, users are redirected to the
# locations defined in the following settings. You can leave any of these
# commented out. If instance is given, the url of the given instance is used
# to build the URL, otherwise the current instance is used.

# adhocracy.post_register_url =
# adhocracy.post_register_instance =
# adhocracy.post_login_url = /proposal
# adhocracy.post_login_instance = test
# adhocracy.post_logout_url =
# adhocracy.post_logout_instance =

# activate geo features

{% if parts.adhocracy.geo == 'True' %}
adhocracy.proposal_geotags = True
adhocracy.page_geotags = True
adhocracy.show_overview_map_on_index = True
adhocracy.show_overview_map_on_instance_index = False
{% end %}

# freeze entire installation
# adhocracy.readonly = True
# adhocracy.readonly.global_admin_exception = False

# this message is shown if adhocracy.readinly is True.
# Leave it empty to show no warning at all
# This string is translatable
# adhocracy.readonly.message =

# show tutorials
adhocracy.show_tutorials = True

# use avatars
# adhocracy.use_avatars = True

# hide instance list in main navigation
adhocracy.hide_instance_list_in_navigation = False

# hide watchlist in main navigation and put it in user menu
adhocracy.put_watchlist_in_user_menu = False

# useful in settings where users can create instances
adhocracy.show_instance_creators = False

# show tag facet as tagcloud instead of list
# adhocracy.tagcloud_facet = True

# an arbitrary list of 'proposals', 'milestones' and 'events'
# adhocracy.instance_overview_contents = proposals, milestones

# an arbitrary list of 'events'
# adhocracy.instance_overview_sidebar_contents = events

# number of upcoming milestones to show in instance overview
adhocracy.number_instance_overview_milestones = 3

# hide categories in facet navigation if no proposal is assigned to it
adhocracy.hide_empty_categories_in_facet_list = True

# Show global stats (user/proposal/comment count) on frontpage
#adhocracy.show_stats_on_frontpage = true

# number of newest proposals to show on frontpage (0 to hide the list)
adhocracy.startpage.proposals.list_length = 0

# enable displaying of proposal descriptions in the pager
# adhocracy.proposal_pager_inline = True

# Source for imprint, details etc. ("database", "external" or "filesystem" (default))
#adhocracy.staticpage_backend = database

# Use external staticpages API call to render navigation
# adhocracy.use_external_navigation = true

# If adhocracy.use_external_navigation is enabled, get the substructure of
# this basepath.
# adhocracy.external_navigation_base =

# Maximum length of category long description (default: 20000)
# adhocracy.category.long_description.max_length = 20000


# Configure paths to static content which is inserted

# Static content path for start page (default: index)
adhocracy.static_index_path = index

# Static content path for login page (default: empty)
# adhocracy.static_login_path = login

# Static content paths for shibboleth register page (default: empty)
# Ontop defines the area on top of the form and the title of the page.
# adhocracy.static_shibboleth_register_ontop_path = shibboleth_register_ontop
# Below defines the area below the form, the title is ignored.
# adhocracy.static_shibboleth_register_below_path = shibboleth_register

# Static content path for individual instance overview pages (default: empty)
# {key} should be replaced by the instance key.
# A common value might be {key}-startpage.
# adhocracy.instance-{key}.static_overview_path

# Use the static pages "footer_1", "footer_2" and "footer_3" instead of the
# default footer.
# adhocracy.customize_footer = True

# If adhocracy.custom_footer is enabled, use the staticpages "footer_*_{key}"
# for the following instances.
# adhocracy.instance_footers =


# Ask the user for email and then password, instead of form + links
# adhocracy.login_style = alternate

# Force randomized user names (default: false)
# adhocracy.force_randomized_user_names = true

# Set display name in register dialog (default: false)
# adhocracy.set_display_name_on_register = true

# Allow organization accounts
# adhocracy.allow_organization = True

# Automatically set new permissions their default value. This should be
# set to false in restrictive environments.
# adhocracy.autoassign_permissions = true

# Turn on badge-specific UI modifications
# adhocracy.enable_behavior = True

# Show Facebook / Twitter / G+ buttons
# adhocracy.show_social_buttons = False

# Use a custom stylesheet for these instances
# The stylesheets are expected at /static/stylesheets/adhocracy_{key}.css
# adhocracy.instance_stylesheets =

# Allow authenticated instances to use one of these themes
# The stylesheets are expected at /static/stylesheets/adhocracy_theme_{key}.css
# Additionally, a preview image is expected at
# /static_theme/static/images/theme-preview-{key}.png
# adhocracy.instance_themes =

# Allow to set instance logo as subheader background
# adhocracy.instance.allow_logo_as_background = True

# Might be something like '-order.proposal.support'.  See the definition
# of PROPOSAL_SORTS in src/adhocracy/lib/pager.py for all available options.
# adhocracy.listings.instance_proposal.sorting = None

# Display instance index as tiles instead of list
# adhocracy.instance_index_as_tiles = true

# Display hide sidebar on instance index
# adhocracy.instance_index_sidebar = false

## Performance options

# Check whether feedback instance exists before rendering a feedback button
# adhocracy.feedback_check_instance = False

# Load feedback categories for the feedback form
# adhocracy.feedback_use_categories = False

# Optional user attributes
# adhocracy.user.optional_attributes =
#     year_of_birth, int, Year of Birth
#     foo, unicode, Foo
# adhocracy.user.optional_attributes.year_of_birth =
#     2001; 2222; 1111
## adhocracy.user.optional_attributes.foo =

# Require user to accept terms and conditions and privacy policy
# adhocracy.registration.require_terms_check = true

{% python
velruse_enabled = 'False'
if parts['domains'].get('velruse', None):
   velruse_enabled = 'True'
%}
{% if velruse_enabled == 'True' %}
# velruse.{host,port} is where adhocracy goes to find the velruse
# service.  also, velruse puts this in the url that it uses to make
# the browser connect to to the sso service.  if you get this wrong,
# users may get an error message from the sso service in the browser
# that your application domain is misconfigured.
velruse.domain = ${parts.domains.velruse}
velruse.port = ${parts.ports.velruse_proxy}
velruse.protocol = ${parts.velruse.proxy_protocol}
{% end %}

# hide milestone timeline
# adhocracy.milestone.hide_timeline = True


# The following settings lack documentation

# adhocracy.allow_password_change
# adhocracy.comment_wording
# adhocracy.create_initial_instance_page
# adhocracy.debug.sql
# adhocracy.enable_gender
# adhocracy.enable_votedetail
# adhocracy.export_personal_email
# adhocracy.force_no_http_proxy
# adhocracy.hide_final_adoption_votings
# adhocracy.instance_key_length_max
# adhocracy.instance_key_length_min
# adhocracy.instance.show_settings_after_create
# adhocracy.listings.instance.sorting
# adhocracy.milestone.allow_show_all_proposals
# adhocracy.monitor_browser_values
# adhocracy.monitor_comment_behavior
# adhocracy.monitor_extended
# adhocracy.monitor_external_links
# adhocracy.monitor_page_performance
# adhocracy.monitor_pager_clicks
# adhocracy.page.allow_abstracts
# adhocracy.proposal.split_badge_edit
# adhocracy.propose_optional_attributes
# adhocracy.redirect_startpage_to_instance
# adhocracy.registration.email.blacklist
# adhocracy_service.rest_api_address
# adhocracy_service.rest_api_token
# adhocracy_service.staticpages.rest_api_address
# adhocracy_service.verify_ssl
# adhocracy.show_abuse_button
# adhocracy.show_instance_overview_proposals_all
# adhocracy.show_instance_overview_stats
# adhocracy.startpage.instances.list_length
# adhocracy.static.age
# adhocracy.static_agree_text
# adhocracy.static.category_index_heading
# adhocracy.static.page_index_heading
# adhocracy.store_notification_events
# adhocracy.translations
# adhocracy.user.bio.max_length
# adhocracy.user.bio.no_max_length
# adhocracy.user.display_name.allow_change
# adhocracy.use_test_instance
# adhocracy.wording.intro_for_overview
# run_integrationtests
# skip_authentication
# adhocracy.shibboleth.display_name.force_update
# adhocracy.shibboleth.display_name.function
# adhocracy.shibboleth.locale.attribute
# adhocracy.shibboleth_logout_url
# adhocracy.shibboleth.register_form
# adhocracy.shibboleth.userbadge_mapping


{% if parts.get("adhocracy_service_conf", False) %}

# token to access the rest api (use it for header "X-API-Token")
adhocracy_service.rest_api_token = ${parts.adhocracy_service_conf.rest_api_token}

# rest api url
adhocracy_service.rest_api_address = ${parts.adhocracy_service_conf.rest_api_address}

######################################################
#  adhocracy_service rest api backend and kotti cms  #
######################################################

[app:kotti]
use = egg:kotti

# kotti.site_title: your site's title
kotti.site_title = Adhocracy static pages and media center


# kotti.secret: defines the initial password of the 'admin' user
kotti.secret = ${parts.adhocracy_service_conf.kotti_secret}


# sqlalchemy.url: the database that you want to use, defaults to SQLite
# see http://www.sqlalchemy.org/docs/core/engines.html#database-urls
sqlalchemy.url = ${parts.adhocracy_service_conf.sqlalchemy_url}

# mail.default_sender: configure the 'from' address of emails sent by Kotti
mail.default_sender = yourname@yourhost

# kotti.configurators: another hook for add-ons
# kotti_tinymce should always be present (unless you don't want WYSIWYG editing)
kotti.configurators = kotti_tinymce.kotti_configure adhocracy_kotti.kotti_configure

# kotti.populators : create initial content
kotti.populators = ${parts.adhocracy_service_conf.kotti_populate}

# kotti.asset_overrides: override Kotti's templates and resources; an example:
# kotti.asset_overrides = mypackage:kotti-overrides/

# token to access the rest api (use it for header "X-API-Token")
rest_api_token = ${parts.adhocracy_service_conf.rest_api_token}

# pyramid.default_locale_name: set the user interface language
pyramid.default_locale_name = en

pyramid.includes =
  pyramid_tm
#  pyramid_debugtoolbar
  adhocracy_kotti

[filter:paste_prefix]
use = egg:PasteDeploy#prefix
prefix = ${parts.adhocracy_service_conf.cms_path}

[filter:fanstatic]
use = egg:fanstatic#fanstatic

[pipeline:adhocracy_service]
pipeline =
    paste_prefix
    fanstatic
    kotti
{% end %}

[alembic]
script_location = src/adhocracy/alembic
sqlalchemy.url = ${parts.adhocracy['sqlalchemy.url']}

# Logging configuration

[loggers]
keys = root, adhocracy, sqlalchemy

[handlers]
keys = console

[logger_root]
level = INFO
handlers = console

[formatters]
keys = generic

[logger_routes]
level = INFO
handlers =
qualname = routes.middleware
# "level = DEBUG" logs the route matched and routing variables.

[logger_adhocracy]
{% if parts.adhocracy.debug == 'True' %}level = DEBUG {% end %}
{% if parts.adhocracy.debug != 'True' %}level = INFO {% end %}
handlers =
qualname = adhocracy

[logger_sqlalchemy]
level = WARN
handlers = console
qualname = sqlalchemy.engine

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(asctime)s %(levelname)-5.5s [%(name)s] %(message)s

##############################################################
# Custom OVERRIDE adhocracy settings
##############################################################

${parts.adhocracy['settings_override']}
